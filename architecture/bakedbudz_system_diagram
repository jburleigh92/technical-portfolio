# BakedBudz Store — System Architecture Diagram (v2)

Below is the high-level systems architecture for the fully custom v2 eCommerce platform.  
It captures how WooCommerce, Blaze POS, dispatch, verification, payments, loyalty, and operational tooling interact in real-time.

```
                                       ┌───────────────────────────┐
                                       │       Customer Device     │
                                       │ (Web / Mobile Web / iOS)  │
                                       └───────────────┬───────────┘
                                                       │
                                                       ▼
                                      ┌────────────────────────────────┐
                                      │     WooCommerce (Custom v2)    │
                                      │  - Product Catalog             │
                                      │  - Checkout & Cart Logic       │
                                      │  - Customer Profiles           │
                                      │  - Order Creation              │
                                      └───────────────┬────────────────┘
                                                      │ REST API Calls
                                                      ▼
                    ┌──────────────────────────────────────────────────────────┐
                    │                Custom Integration Layer                  │
                    │----------------------------------------------------------│
                    │ Maps WooCommerce order → Blaze POS order schema          │
                    │ Normalizes: phone, name, items, tax, delivery window     │
                    │ Handles: retries, validation, error-handling, logging    │
                    └───────────────┬──────────────────────────────────────────┘
                                    │
                                    ▼
               ┌────────────────────────-────────┐
               │           Blaze POS             │
               │  - Order Record of Truth        │
               │  - Compliance Fields            │
               │  - Customer Profiles            │
               │  - Inventory / SKU Mapping      │
               └──────────────┬─────────────-────┘
                               │ Webhooks (Order Created / Updated)
                               ▼
         ┌───────────────────────────────────-───┐
         │        Customer Verification          │
         │---------------------------------------│
         │ Validates:                            │
         │  - ID status                          │
         │  - Returning vs new customer          │
         │  - Phone + name normalization         │
         │                                       │
         │ Determines whether dispatch is allowed│
         └──────────────┬───────────────────-────┘
                        │ Verified Customers Only
                        ▼
           ┌────────────────────────────────┐
           │           Tookan API           │
           │  - Creates delivery task       │
           │  - Assigns driver              │
           │  - Tracks real-time status     │
           └───────────────┬────────────────┘
                           │ Webhooks (Driver status events)
                           ▼
       ┌─────────────────────────────────────────────┐
       │        AutoEnrollEngine Service             │
       │---------------------------------------------│
       │ Flask-based webhook listener                │
       │ AJAX/Selenium scrapes ETA (fallback mode)   │
       │ Routes verified events downstream           │
       └───────────────┬─────────────────────────────┘
                        │
                        ▼
     ┌─────────────────────────────────────────────────────┐
     │                  Payment Engine (PostPay)           │
     │-----------------------------------------------------│
     │ Extracts:                                           │
     │   - Zelle SMS (MacOS iMessage DB parsing)           │
     │   - Cash App / Venmo / Apple Pay emails (Gmail API) │
     │ Validates payment against active orders             │
     │ Updates SQLite ledger                               │
     │ Sends real-time Slack confirmation                  │
     └───────────────────────┬────────────────────────_────┘
                             │ Verified Payments Only
                             ▼
         ┌────────────────────────────────────────┐
         │           Alpine IQ Loyalty API        │
         │----------------------------------------│
         │ Auto-enrolls customer (profile create) │
         │ Syncs opt-in status                    │
         │ Issues loyalty points                  │
         │ Triggers post-order SMS                │
         └──────────────────────────┬─────────────┘
                                    │
                                    ▼
                        ┌──────────────────────────┐
                        │        Slack API         │
                        │ - Payment Confirmation   │
                        │ - Dispatch Updates       │
                        │ - System Alerts          │
                        └──────────────────────────┘
```

---

## What This Diagram Demonstrates

### 1. **Multi-System Architecture**
I integrated *seven* independent platforms into a single unified workflow:
- WooCommerce  
- Blaze POS  
- Custom Integration Layer  
- Tookan dispatch  
- WhListen (webhook / ETA engine)  
- PostPay (payment verification)  
- Alpine IQ loyalty  

### 2. **Real-Time Event Orchestration**
I designed the handoff logic between:
- Order creation  
- Verification  
- Dispatch  
- ETA tracking  
- Payment validation  
- Loyalty automation  
- Operational notification  

### 3. **Custom Microservices**
Both **AutoEnrollEngine** and **PostPay** sit in the architecture as first-class services that I built.

### 4. **API-Driven Architecture**
Every block is connected by:
- REST API calls  
- Webhook triggers  
- Custom Python-based logic 
